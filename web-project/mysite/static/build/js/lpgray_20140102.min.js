/*! lpgray-site 2014-01-02 */
$(function(a){a.gtmap={},a.gtmap.formbiz_config={atleast:{exp:"",tip:"至少选中一个选项"},select:{exp:"",tip:"您还没有选择"},required:{exp:/^\S+$/,tip:"不能为空"},number:{exp:/^([+-]?)\d*\.?\d+$/,tip:"无效数字"},chs:{exp:/^[\u4e00-\u9fa5]+$/,tip:"无效中文"},eng:{exp:/^[a-zA-Z\ \']+$/,tip:"无效英文"},email:{exp:/\w+((-w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+/,tip:"无效英文"}},a.gtmap.project_code_template={jingjiang1:"(靖)地呈字[##]第##号",nanjing:"(宁)地供字[##]第##号，第##次"}}(window)),function(a){var b=function(b,c,d){this.elem=b,this.options=d,this.$elem=a(b),this.rules=[],this.init(c)};b.prototype={init:function(b){var c=this,d=c.$elem[0].nodeName,e=a.trim(b).split(",");for(var f in e)this.rules.push(this.options.ruleMap[a.trim(e[f])]);"INPUT"===d||"TEXTAREA"===d?c.$elem.blur(function(){setTimeout(function(){c.check()},200)}):"DIV"===d?c.$elem.find("input[type]").each(function(){a(this).mouseup(function(){setTimeout(function(){c.check()},200)})}):"SELECT"===d&&c.$elem.change(function(){setTimeout(function(){c.check()},200)})},check:function(){var b=this,c=this.$elem[0].nodeName;if("INPUT"===c||"TEXTAREA"===c){var d=a.trim(this.$elem.val());for(var e in this.rules){if(!this.rules[e].exp.test(d.replace(/\s/g,"")))return this.options.onFailure(this.elem,this.rules[e].tip),!1;this.options.onSuccess(this.elem)}return!0}return"DIV"===c?b.$elem.find(":checked").length?(this.options.onSuccess(this.elem),!0):(this.options.onFailure(this.elem,this.rules[0].tip),!1):"SELECT"===c?b.$elem.children(":selected").val()?(this.options.onSuccess(this.elem),!0):(this.options.onFailure(this.elem,this.rules[0].tip),!1):void 0}};var c=function(b,c){this.$elem=a(b),this.options=c,this.list=[],this.init()};c.prototype={init:function(){var c=this;c.$elem.find("[data-validate]").each(function(){var d=a(this).data("validate");/^\S+$/.test(d)&&c.list.push(new b(this,d,c.options))})},validateAll:function(){var b=[];for(var c in this.list)b.push(this.list[c].check());return-1===a.inArray(!1,b)}},a.fn.formvalidate=function(b){return this.each(function(){var d=a.extend(!0,a.fn.formvalidate.defaults,b),e=new c(this,d);a(this).data("form",e),a(this).submit(function(){return e.validateAll()})})},a.fn.formvalidate.defaults={onSuccess:function(){},onFailure:function(){},ruleMap:gtmap.formbiz_config}}(jQuery),document.getElementsByClassName||(document.getElementsByClassName=function(a,b,c){b=b||document,c=c||"*";var d=[],e="*"===c&&b.all?b.all:b.getElementsByTagName(c),f=e.length;a=a.replace(/\-/g,"\\-");for(var g=new RegExp("(^|\\s)"+a+"(\\s|$)");--f>=0;)g.test(e[f].className)&&d.push(e[f]);return d}),function(a){var b=a.Utils={};b.hasFeature=function(a){return document.getElementsByTagName("html")[0].className.indexOf(a)>-1},b.filterFileName=function(a){if(a){var b=a.indexOf("\\")>=0?a.lastIndexOf("\\"):a.lastIndexOf("/"),c=a.substring(b);return(0===c.indexOf("\\")||0===c.indexOf("/"))&&(c=c.substring(1)),c}},b.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)},b.encodeXML=function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}}(window),function(a,b){function c(a,c,d,e){function f(){var a,c=g.children("span").children("a"),d=g.children("span").children(".active"),e=[],f=10;if(c.length>f){a=d.index()+1,c.each(function(b){return e.length>=f?!1:(b+=1,b===a||b===a-1||b===a+1||1===b||2===b||b===c.length-1||b===c.length?(e.push(b),void 0):void 0)});for(var h=a-2;h>2&&!(e.length>=f);h--)e.contains(h)||e.push(h);for(var h=a+2;h<c.length-1&&!(e.length>=f);h++)e.contains(h)||e.push(h);e.sort(function(a,b){return a>b}),c.each(function(a){a+=1,e.contains(a)||b(this).remove()}),c=g.children("span").children("a");for(var h=1;h<e.length;h++)e[h]-e[h-1]>1&&b(c[h-1]).after("<strong> ... </strong>")}}Array.prototype.contains=function(a){for(i in this)if(this[i]==a)return!0;return!1};var g=b("#J_PAGIN"),h="page.page",j="page.size",k=g.children(".prev"),l=g.children(".next"),m=location.href,n="?";n=e?e:m.indexOf("?")>-1&&-1==m.indexOf(h)?m+"&":m.indexOf(h)>-1?m.substring(0,m.indexOf(h)):"?";var o=Math.ceil(d/c);for(1==a&&k.addClass("disabled"),a==o&&l.addClass("disabled"),g.children("span").children().remove(),i=1;o>=i;i++){var p=b("<a />").attr({href:n+h+"="+i+"&"+j+"="+c}).html(i);g.children("span").append(p),i==a&&(p.addClass("active"),p.attr("href","#"))}k.attr({href:n+h+"="+(a-1)+"&"+j+"="+c}),l.attr({href:n+h+"="+(a+1)+"&"+j+"="+c}),f(a),g.find("a").addClass("j_pagin_link")}function d(c){c&&b(c).find(".codearea").addClass("prettyprint"),a.prettyPrint&&prettyPrint()}function e(){var a={onFailure:function(a){b(a).length&&b(a).removeClass("success").addClass("error")},onSuccess:function(a){b(a).length&&b(a).removeClass("error").addClass("success")}};b.fn.formvalidate.defaults=b.extend({},b.fn.formvalidate.defaults,a),b(".j_vali_form").formvalidate()}!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),b(document).on("click",'[href="#"],.disabled',function(a){a.preventDefault()}),b(document).ready(function(){e()}),a.pagin=c,a.prettyCode=d}(window,jQuery);